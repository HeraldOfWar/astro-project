{% extends "base.html" %}

{% block content %}
<center><h2>База данных космических объектов</h2></center>
<a href="news" class="btn btn-secondary">-> Записки астронома</a>
{% if current_user.is_authenticated %}
    <a href="add_system" class="btn btn-secondary">Добавить систему</a>
{% endif %}
{% for item in systems %}
<center><table cellpadding="8">
    <tr>
         <td><center><h4>{{item.name}} ({{item.galaxy}})</h4></center></td>
    </tr>
    <tr/>
        <td style="background-color: #D3D3D3">№</td>
        <td style="background-color: #D3D3D3">Название объекта</td>
        <td style="background-color: #D3D3D3">Тип</td>
        <td style="background-color: #D3D3D3">Расстояние до Звезды</td>
        <td style="background-color: #D3D3D3">Период обращения (в земных годах)</td>
        <td style="background-color: #D3D3D3">Эксцентриситет</td>
        <td style="background-color: #D3D3D3">Орбитальная скорость</td>
        <td style="background-color: #D3D3D3">Плотность</td>
        <td style="background-color: #D3D3D3">Ускорение свободного падения</td>
        <td style="background-color: #D3D3D3">Масса (в массах Земли)</td>
        <td style="background-color: #D3D3D3">Количество спутников</td>
    </tr>
    {% for system_item in item.space_objects%}
        <tr>
            {% if system_item.collaborators%}
            <td style="background-color: #dfe6f3">
                <center>{{item.collaborators}}</center>
            </td>
            {% else %}
            <td style="background-color: #dfe6f3">
                <center>-</center></td>
            {% endif %}
            {% if system_item.collaborators%}
            <td style="background-color: #dfe6f3">
                <center>{{item.collaborators}}</center>
            </td>
            {% else %}
            <td style="background-color: #dfe6f3">
                <center>-</center></td>
            {% endif %}
            {% if system_item.collaborators%}
            <td style="background-color: #dfe6f3">
                <center>{{item.collaborators}}</center>
            </td>
            {% else %}
            <td style="background-color: #dfe6f3">
                <center>-</center></td>
            {% endif %}
            {% if system_item.collaborators%}
            <td style="background-color: #dfe6f3">
                <center>{{item.collaborators}}</center>
            </td>
            {% else %}
            <td style="background-color: #dfe6f3">
                <center>-</center></td>
            {% endif %}
            {% if item.collaborators%}
            <td style="background-color: #dfe6f3">
                <center>{{item.collaborators}}</center>
            </td>
            {% else %}
            <td style="background-color: #dfe6f3">
                <center>-</center></td>
            {% endif %}
            {% if system_item.collaborators%}
            <td style="background-color: #dfe6f3">
                <center>{{item.collaborators}}</center>
            </td>
            {% else %}
            <td style="background-color: #dfe6f3">
                <center>-</center></td>
            {% endif %}
            {% if item.is_finished%}
            <td style="background-color: #d4ffb2">
                <center>Finished</center>
            </td>
            {% else %}
            <td style="background-color: #ffe6ff">
                <center>Is not finished</center>
            </td>
            {% endif %}
        </tr>
    {% endfor %}
    <tr>
        <td>
        {% if current_user.is_authenticated and (current_user == item.user or current_user.id == 1) %}
        <div>
            <a href="/jobs/{{ item.id }}" class="btn btn-warning">
                Edit Job
            </a>
            <a href="/job_delete/{{ item.id }}" class="btn btn-danger">
                Delete Job
            </a>
        </div>
        {% endif %}
        </td>
    <tr>
</table>
</center>
{% endfor %}
{% endblock %}